<div class="container mt-4">
  <h1 class="mb-4 text-primary">My Applications</h1>
  <table class="table table-striped table-hover">
    <thead class="table-dark">
      <tr>
        <th>Job Title</th>
        <th>City</th>
        <th>Interview Status</th>
        <th>Interview Details</th>
        <th>Status</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <% @applications.each do |application| %>
        <tr>
          <td><%= application.job.title %></td>
          <td><%= application.job.city %></td>
          <td>
            <% if application.interviews.any? %>
              <span class="badge <%= application.interviews.last.status == 'scheduled' ? 'bg-info' : 'bg-secondary' %>">
                <%= application.interviews.last.status.humanize %>
              </span>
            <% else %>
              <span class="badge bg-warning">No Interview Scheduled</span>
            <% end %>
          </td>
          <td>
            <% if application.interviews.any? && application.interviews.last.scheduled_at.present? %>
              <%= application.interviews.last.scheduled_at %>
            <% else %>
              No details available
            <% end %>
          </td>
          <td>
            <span class="badge <%= application.status == 'pending' ? 'bg-warning' : application.status == 'accepted' ? 'bg-success' : 'bg-danger' %>">
              <%= application.status.humanize %>
            </span>
          </td>
          <td>
            <%= link_to "View Application", job_seeker_application_path(application), class: "btn btn-primary btn-sm" %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
