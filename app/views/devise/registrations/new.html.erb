<turbo-frame id="role_frame">
  <%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { class: "form-container" }) do |f| %>
    <%= devise_error_messages! %>

    <div class="form-group">
      <%= f.label :name, "Full Name", class: "form-label" %>
      <%= f.text_field :name, required: true, class: "form-control" %>
    </div>

    <div class="form-group">
      <%= f.label :email, class: "form-label" %>
      <%= f.email_field :email, required: true, class: "form-control" %>
    </div>

    <div class="form-group">
      <%= f.label :password, class: "form-label" %>
      <%= f.password_field :password, required: true, class: "form-control" %>
    </div>

    <div class="form-group">
      <%= f.label :password_confirmation, class: "form-label" %>
      <%= f.password_field :password_confirmation, required: true, class: "form-control" %>
    </div>

    <div class="form-group">
      <%= f.label :role, "Choose your Role", class: "form-label" %>
      <%= f.select :role,
            options_for_select([["Select role"], ["Company Admin", "company_admin"]], f.object.role),
            prompt: "Select Role",
            required: true,
            class: 'form-control',
            id: 'role-select',
            data: { turbo_frame: "role_frame", action: "change->form#submit" } %>
    </div>

    <% if f.object.role == 'company_admin' %>
      <%= render "users/registrations/company_details", f: f %>
    <% end %>

    <div class="form-group">
      <%= f.submit "Sign up", class: "btn btn-primary btn-block" %>
    </div>
  <% end %>
</turbo-frame>
